<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<title>ActDev - Active travel provision and potential in planned and proposed development sites.</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />

	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-title" content="ActDev" />

	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/site.webmanifest">
	<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
	<meta name="msapplication-TileColor" content="#90be6d">
	<meta name="theme-color" content="#ffffff">

	<!-- Fonts -->
	<link rel="preconnect" href="https://fonts.gstatic.com"> 
	<link href="https://fonts.googleapis.com/css2?family=Arimo:wght@400;500;600;700&family=Rubik:wght@300;400;500;600;700&display=swap" rel="stylesheet">

	<script src="/js/lib/js-cookie/js.cookie.js"></script>

	<!-- Vex dialogs; see: https://github.hubspot.com/vex/ -->
	<script src="/js/lib/vex-4.1.0/dist/js/vex.combined.min.js"></script>
	<link rel="stylesheet" href="/js/lib/vex-4.1.0/dist/css/vex.css" />
	<link rel="stylesheet" href="/js/lib/vex-4.1.0/dist/css/vex-theme-plain.css" />

	<!-- Chart.js -->
	<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
	
	<!-- Fontawesome icons -->
	<script src="/js/lib/fontawesome/fontawesome-kit-7bd5544b77.js"></script>

	<!-- Parse CSV -->
	<script src="/js/lib/PapaParse/papaparse.min.js"></script>
	
	<!-- D3.js -->
	<script src="https://d3js.org/d3.v6.min.js"></script>

	<script src="/.config.js"></script>
	<link rel="stylesheet" type="text/css" href="/css/style.css" />

<body>
	<main>
		<section class="national-level-zoom">
			<div class="text-section">
				
				<img src="/images/beta.svg" width="50" height="50" id="beta" title="Public beta - some features are not yet live" style="position: absolute; left: 20em; top: 15px;" />
				<h1 class="site-title">ACTDEV</h1>
				<h2 class="site-description">Active travel in new developments</h2>
				<h3 class="blurb">This website provides evidence on active travel provision and potential in and around planned and proposed development sites.</h3>
				<h3 class="blurb">Explore the sites weâ€™ve studied.</h3>
				<div class="ios-segmented-control">
					<span class="selection"></span>
					<div class="option">
						<input type="radio" id="current" name="current-scenario" value="current" checked>
						<label for="current"><span>Current</span></label>
					</div>
					<div class="option">
						<input type="radio" id="goactive" name="current-scenario" value="goactive">
						<label for="goactive"><span>Go Active</span></label>
					</div>
				</div>
				<p>A range of factors influence ease of access by walking and cycling. Distance to key destinations such as workplaces is relevant, but equally important is the type of roads that must be followed and the presence or absence of good quality walking and cycling infrastructure.</p>
				<p>For case study sites, we have investigated measures affecting modal choice. These include the ratio of journey times/distances to local destinations by car as compared to by bicycle, the busyness of the roads, and the circuity of the routes. We have also studied access to public transport nodes such as rail stations.</p>
				<ul class="links">
					<li><a href="/about/">Our methodology <i class="fa fa-chevron-right"></i></a></li>
					<li><a href="/report/">Academic report <i class="fa fa-chevron-right"></i></a></li>
				</ul>
				<section class="photos">
					<img src="/images/assets/cut-through1.png" />
					<img src="/images/assets/cut-through2.png" />
					<img src="/images/assets/cut-through3.png" />
				</section>
				<section class="footer">
					<img src="/images/assets/leeds.png" />
					<img src="/images/assets/cyclestreets.png" />
				</section>
				
			</div>


			<div class="graph-half">
				<div class="section-title">
					<h2>Site data</h2>
					<hr />
				</div>
				<p style="color: white;"><em>Development note: Work on this chart panel is not yet complete.<br />Click anywhere in it to access site-level data.</em></p>
				<a href="/sites/">						<!-- Temporary link to /sites/ -->
				<div id="observablehq-chart"></div>
				</a>									<!-- / Temporary link to /sites/ -->
			</div>
		</section>

	</main>


</body>

<!-- iOS control script -->
<script>
	// Constants
	const SEGMENTED_CONTROL_BASE_SELECTOR = ".ios-segmented-control";
	const SEGMENTED_CONTROL_INDIVIDUAL_SEGMENT_SELECTOR = ".ios-segmented-control .option input";
	const SEGMENTED_CONTROL_BACKGROUND_PILL_SELECTOR = ".ios-segmented-control .selection";


	// Main
	document.addEventListener("DOMContentLoaded", setup);

	// Body functions
	function setup() {
		forEachElement(SEGMENTED_CONTROL_BASE_SELECTOR, elem => {
			elem.addEventListener("change", updatePillPosition);
		})
		window.addEventListener("resize",
			updatePillPosition
			); // Prevent pill from detaching from element when window resized. Becuase this is rare I haven't bothered with throttling the event
	}

	function updatePillPosition() {
		forEachElement(SEGMENTED_CONTROL_INDIVIDUAL_SEGMENT_SELECTOR, (elem, index) => {
			if (elem.checked) moveBackgroundPillToElement(elem, index);
		})
	}

	function moveBackgroundPillToElement(elem, index) {
		document.querySelector(SEGMENTED_CONTROL_BACKGROUND_PILL_SELECTOR).style.transform = "translateX(" + (elem
			.offsetWidth * index) + "px)";
	}

	// Helper functions

	function forEachElement(className, fn) {
		Array.from(document.querySelectorAll(className)).forEach(fn);
	}
</script>


<script type="module">
	import {Runtime, Inspector} from "https://cdn.jsdelivr.net/npm/@observablehq/runtime@4/dist/runtime.js";
	import define from "/js/chart.js";
	new Runtime().module(define, name => {
	if (name === "chart") return new Inspector(document.querySelector("#observablehq-chart"));
	});
</script>

</html>
